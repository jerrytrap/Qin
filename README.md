# Qin

1. 제목 : 

사용자의 성향 분석을 활용한 게임 친구 추천 및 매칭 어플리케이션

2. 주제 : 

성향 혹은 자신이 선택한 몇가지 주제들을 바탕으로 비슷한 성향과 주제를 가진 이용자들을 그룹으로 묶어 함께 게임을 플레이할 수 있도록 찾아주고 연결해주는 어플리케이션 개발

3. 초고 :

스마트폰과 PC, 웨어러블 컴퓨팅 기술의 발달에 따라 거대한 양의 데이터가 빠른 속도로 생성되고 있다. 이에 발맞추어 게임산업의 발전도 기하급수적으로 이루어지고 있다. 더불어 게임을 즐기는 유저들 또한 빠르게 늘고 있다. 이 프로젝트에서는 이러한 유저들끼리의 매칭 시스템을 MySQL 데이터베이스와 React Native 개발툴, node.js를 이용한 REST Api 등을 이용하여 개발하였다.
                                     
4. 주제 선정 배경 :

현대사회에서 게임은 더 이상 어린이들만 하는 부정적인 프로그램이 아니다. e-sports라는 말이 발생하고 많은 이들이 게임을 통해 꿈을 이루고 스트레스를 해소하고 있다. 전 세계에서 게임 시장 매출액은 4위를 기록하고 있으며 , GDP대비 게임 시장 매출액 비중은 한국이 가장 높다. 또한 온라인 게임의 순위권에 존재하는 게임들 중 1,3,4 위의 게임들은 모두 팀워크를 필요로 하는 팀 게임으로, 본인의 역량뿐만 아니라, 팀원과의 호흡도 중요한 게임이다. 이러한 문화 속에서 게임 친구를 만드는 제일 보편적인 방법은 아직까지 제시되지 않고 있다. 일반적으로 게임 게시판, 동호회, 카페, 블로그, 오픈채팅과 같은 방식으로 게임 친구를 찾을 수는 있지만, 이 과정이 다소 복잡하고 귀찮기 때문에 많은 사람들은 익명의 인원들과 게임을 즐기게 된다. 이러한 상황에서 이번 프로젝트를 통해 쉽고 빠르게 게임을 함께할 친구를 구할 수 있도록 도와주는 어플리케이션 개발을 주제로 선정하게 되었다.
   

5. 필요성:

현재 게임 내 매칭 시스템은 완벽한 랜덤으로 이루어지며, 익명성이 보장되기 때문에 게임 내에서 비매너 플레이를 하는 유저들이 많다. 이러한 이유로 많은 사람들이 신원이 보장되어있는 친구들과 같이 게임을 하는데, 친구들과 함께 게임을 하지 못할 때는 다시 비매너 유저들과 함께 게임을 해야하는 상황에 직면하게 된다. 프로젝트팀에서 진행한 설문조사에 따르면 77.9%가 게임을 하기 위해 팀원을 구해본적 있으며 이 중 16.7%만이 온라인으로 팀원을 구한다고 대답했다. 온라인에서 팀원을 구하지 않는 83.3%의 인원들은 가장 큰 이유로 접근성과 익명성을 이용한 비매너 유저때문이라고 답변하였다. 또한 설문 답변자들 중 80.6%가 이번 프로젝트로 개발 될 어플리케이션의 사용 의향이 있다고 답변하였다.




6. 요구사항분석 :

개발자 회의, 트럭 라이딩 및 인터뷰, 설문조사 등을 이용하여 요구사항을 분석하였다.



기능 요구사항
1
회원가입/ 로그인 기능
2
유저의 프로필 및 매너지수, 정보 관리 기능
3
친구를 관리하는 기능
4
카테고리를 통한 게임 그룹 관리 기능
5
해시태그를 이용한 채팅 그룹 관리 기능
6
해시태그를 이용한 취향 선택 및 관리 기능
7
유저 매칭 및 유저간 매너지수 평가 기능



유저 요구사항
1
매너지수를 판단하여 비매너 유저를 여과할 수 있는 시스템
2
빠른 매칭과 가벼운 게임 플레이를 지향하는 어플리케이션
3
당근마켓의 인터페이스의 특성을 가진 어플리케이션
4
직관적이고 단순한 사용법
5
너무 무겁지 않은 프로그램의 사이즈
6
다양한 게임을 지원하되 유저가 많은 게임을 전면에 내세운 마케팅





어플리케이션 요구사항
1
게임 선택/ 게임 입력하면 밑에 해당 키워드에 맞는 리스트가 뜨고 그 리스트에서 맞는 게임 선택
2
아이디 입력/ 게임이 선택 되면 옆에 아이디를 텍스트로 입력
3
티어 선택/ 해당 게임에 티어 목록을 보여주고 select
4
플레이하는 게임 입력/ 위에서 선택한 게임은 이미 들어가 있고, 플레이하는 게임 입력에서는 아이디나 
                      티어를 입력하지 않고 이런 게임도 선택 가능하다는 걸 보여주는 용도
5
장르 선택/ 자신이 선호하는 장르를 입력할 수 있다.
6
카테고리/ 유저가 쓴 글은 하나만 있고 옆에 새로고침 버튼을 만들어서 시간을 초기화
7
수락거절/ 수락 거절 기능은 필요 없고 메시지 참여 형식으로 개발
8
친구 관리/ 프로필 누르면 옆에 관계가 뜨도록 관리
9
친구 관리/ 카톡과 같이 새로운 친구를 24시간 노출하는 게 아닌 드롭다운으로 숨김
10
채팅방 / 탭을 2개로 나눠서 하나는 1대1 채팅, 하나는 해시태그 채팅으로 나눔
11
매치 완료/ 매치완료 버튼을 누른 후에는 방 리스트로 넘어가고 갱신 버튼 대신 게임 종료 버튼을 표시
12
게임 종료/ 게임이 종료되면 자동으로 방 퇴장 후, 매너지수 평가창 팝업


7. 경쟁사 분석

현재 게임 친구를 매칭해주는 직관적이고 가벼운 어플리케이션은 존재하지 않는다. 그렇기 때문에 1차 경쟁상대는 전무하며 2차 경쟁상대는 다음과 같다.

 1. 각종 게임 커뮤티니 사이트에서 운영하는 게시판 
 2. 카카오톡 오픈채팅방 
 3. 그 외 카페 및 일반 커뮤티니 게시판

이때 게시판이나 오픈 채팅방에 글을 올려서 상대에게 연락이 오길 기다리는 과정은 매우 비효율적이며 해당 커뮤니티 이용 유저만 볼 수 있다는 접근성의 제한이 발생한다. 직관적이고 효율적인 매칭 시스템, 매너지수를 통한 유저 관리 등과 같은 경쟁사에서 볼 수 없는 장점들을 가지고 있어서 충분히 경쟁력을 가지고 있다고 볼 수 있다.




8. 타임라인 (설계 일정)

월별
설계 목표
3월
주제 선정 및 개발환경 구축
4월
프론트 엔드 학습 및 백 엔드 학습 
5월
백 엔드 개발, UI 디자인 확정
6월
프론트 엔드 개발
7월
방학
8월
방학
9월
프로토타입 완성 / 프론트 엔드, 백엔드 개발
10월
프론트 엔드, 백엔드 개발 완료 / 통합구현 및 동료검토 진행
11월
인수 테스트, 사용성 테스트 등 출시 전 테스트 진행 / 앱스토어 등록
12월
최종 발표


9. 역할 분담

성 명
역   할
참여도(%)
이동건
팀 대표 및 카테고리 Tap의 Back & Front 구현
25
이규빈
로그인, 사이드 바 및 유저 회원가입 Back & Front 구현 
18.8
박진곤
Hash Tag를 이용한 검색 및 Group Back & Front 구현
18.8
류대현
Client 간 또는 Group 간 채팅 서버 구현
18.8
이지훈
유저 프로필 및 유저의 친구 관리 Back & Front 구현
18.8






10. Background

 . React Native

 . React native란?

react의 접근방법을 모바일로 확장한 Facebook의 오픈소스 모바일 애플리케이션 프레임워크이다. 모바일 크로스 플랫폼(Cross Platform)으로서 하나의 프로그래밍 언어(Javascript)로 IOS와 Android 모바일 앱을 동시에 개발할 수 있는 오픈소스이다. Javascript로 코딩한 react의 컴포넌트(기능을 단위 별로 나눠 놓은 것)는 react native 플랫폼을 거쳐 IOS, android native코드로 변환된다.
        
                 



 위의 사진을 보면왼쪽 코드의 text 컴포넌트를 bridge(React Native)를 통해 안드로이드의 textview, IOS의  
 UITextView로 변환된다. React Native는 Javascript와 폰의 커뮤니케이션을 쉽게 하기 위해 만들어진 것이다.

  React Native의 장점

 1. IOS, Android를 동시에 개발하기가 쉽다. 
 2. React를 알면 더욱 쉽게 개발할 수 있다.
 3. Hot Reload, Live Reload(소스 수정 후 저장 시 해당 부분만 리로드하여 수정된 부분을 핸드폰, 시뮬, 
    에뮬레이터에서 확인하며 개발이 가능하다.) => 개발속도가 빨라진다.
 4. React 기반의 사이트를 모바일로 포팅하기 쉽다.
 5. Redux 등 훌륭한 아키텍처 패턴을 지원한다.
 6. 웹 확장에 유리하다. (복잡하지 않은 앱은 react-native-web도 가능)
 7. 개발 툴이 필요 없다. (android studio 등)
 8. 다양한 Debugging 지원 (키보드 단축키, 콘솔 로그, Chrome Developer Tools, React Developer Tools 등)
 9. 플랫폼 별 언어를 몰라도 Javascript만 알고 있으면 앱을 만들 수 있다.
 10. 다른 하이브리드(IOS, Android)앱보다 속도가 월등히 빠르다.

  일반 웹 앱, 하이브리드앱과 다른 점.

 1. React Native는 일반 iOS 및 Android 앱과 동일한 기본 UI 빌딩 블록을 사용한다. JavaScript와 React를 
    사용하여 이러한 빌딩 블록을 함께 모으는 것.
 2. React Native는 Javascript 코드와 native 코드를 별도의 스레드로 분리하여 둘 사이의 통신을 비동기식으로 
    만들어 느려지는 현상이 없다.
 3. 일반 하이브리드앱과 달리 속도가 빠르다. (상대적)




 . Node JS

 Node.js란?

 확장성 있는 네트워크 애플리케이션(서버 사이드) 개발에 사용되는 소프트웨어 플랫폼이다. 작성언어로 Javascript를 
 활용하며 Non-blocking I/O 와 단일 스레드 이벤트 루프를 통한 높은 처리 성능을 가지고 있는 특징을 가지고 
 있다. Node.js는 chrome V8 javascript 엔진으로 빌드된 Javascript(Language로의 의미) 런타임(프로그래밍 언어가 
 구동되는 환경)이다. 

 Node.js는 REPL(read, eval, print, loop)을 통해서 런타임을 제공한다.
  1. Read: 유저의 입력 값을 받아서 메모리에 저장
  2. Eval: 입력 값의 평가, 실행
  3. Print: Eval로 인해 반환된 값을 출력
  4. Loop: 1~3을 반복.

 Node.js의 장점
 1. Event-driven 방식을 사용하여 이벤트를 발생시켰을 때(입력 장치로 데이터를 전송했을 때)에만 작동하는 
   방식이다. 발생한 이벤트에 대해서만 연결을 한다. 
   => 자원을 최소화할 수 있다.

 2. Non-blocking 방식을 사용하기 때문에, 작업을 진행하는 동안 프로세스의 작업을 중단시키지 않는다. 
    => 속도가 동기식(Blocking)보다 빠르고 메모리도 덜 차지한다.

 3. 단일 스레드 방식으로 하나의 스레드가 request를 받으면 바로 다음 처리에 요청을 보내놓고 다른 작업을 
    처리하다가 먼저 요청한 작업이 끝나면 이벤트를 받아서 응답을 보낸다. 동시 request가 오더라도 처리가 
    완료될 때까지 기다리지 않아도 된다. 
    => 적은 양의 자원으로 일을 처리할 수 있다.

 4. 클라이언트와 서버에서의 언어가 동일하다.

 Node.js를 사용하는 회사









 . MySQL

 MYSQL은 전세계적으로 가장 널리 사용되고 있는 오픈소스 데이터베이스이며, 
   MYSQL AB사가 개발하여 배포/판매하고 있는 데이터베이스이다.

   표준 데이터베이스 질의 언어 SQL(Structured Query Language)을 사용하는 개방 소스의 관계형 데이터베이스   
   관리 시스템으로(RDBMS), 매우 빠르고, 유연하며, 사용하기 쉬운 특징이 있다.
   유닉스, 리눅스, windows 운영체제 등에서 사용할 수 있다.

 데이터베이스(database)

  어느 한 조직의 여러 응용 시스템이 공유할 수 있도록 통합, 저장된 운영 데이터의 집합. 
  질의에 대한 실시간 처리 및 응답을 처리할 수 있도록 실시간 접근과 삽입, 삭제, 갱신을 통해 현재의 데이터를 
  동적으로 유지할 수 있는 계속적인 변화를 제공하며, 여러 사용자가 동시에 공용할 수 있는 동시 공유와 위치나 
  주소가 아닌 내용, 즉 값에 따라 참조할 수 있는 내용에 의한 참조의 특징을 지니고 있다.

 MYSQL의 장점

 1.오픈 소스 라이선스이므로, 무료로 사용할 수 있다.
 2. 다양한 운영체제에서 사용할 수 있으며, 여러 가지의 프로그래밍 언어를 지원한다.
 3. 크기가 큰 데이터 집합도 아주 빠르고 효과적으로 처리할 수 있다.
 4. 널리 알려진 표준 SQL 형식(ANSI SQL 표준)을 사용한다.
 5. MYSQL 응용 프로그램을 사용자의 용도에 맞게 수정할 수 있다.
 6. 자동 재시작/복구, 백업 및 PiT 복구, 논리적 온라인 핫 백업을 제공한다.
 7. 스토리지 엔진은 동적으로 변경하여 관리할 수 있고, OLTP 및 트랜잭션을 제공한다.

❹  Git
 






➀  깃(Git /ɡɪt/)은 컴퓨터 파일의 변경사항을 추적하고 여러 명의 사용자들 간에 해당 파일들의 작업을 조율하기 
    위한 분산 버전 관리 시스템이다. 소프트웨어 개발에서 소스 코드 관리에 주로 사용되지만 어떠한 집합의 파일의 
    변경사항을 지속적으로 추적하기 위해 사용될 수 있다. 기하학적 불변 이론을 바탕으로 설계됐고, 분산 버전 관리 
    시스템으로서 빠른 수행 속도에 중점을 두고 있는 것이 특징이며 데이터 무결성, 분산, 비선형 워크플로를 
    지원한다.

➁ 다양한 GUI

  1. GitHub Desktop
  2. Git Kraken
  3. Smart Git
  4. Source Tree

➂ Git의 장점

  1. Repository의 완전한 복사본을 로컬 장비에 둘 수 있다.
  2. 처리 속도가 빠르다.
  3. 일시적인 작업에 대한 이력 관리가 쉽다.
  4. 브랜치, 머지가 쉽다.
  5. 장소에 구애받지 않고 협업이 가능하다.














11. 플로우차트




12. UML 다이어그램



13. 데이터 베이스 설계

요구사항 분석 후 개념설계, 논리설계, 물리설계를 진행하였다. aquery를 이용하여 논리 설계를 하였으며
하이디SQL을 이용하여 물리설계를 하였다.



14. 서버 설계

다음은 우리 서버의 설계 구조이다.

app.js이다


현재 서버는 http 통신을 위해 REST API의 구조이다.
request에 대한 response를 해 주는 서버는 모듈화를 하여 route에 저장되어 있으며 app.js는 해당 모듈을 불러다 사용하고 있다.

use router class 부분을 보면 서버 모듈에 대한 디렉토리의 index를 불러서 사용하고 있음을 알 수 있다.

app.use에서 사용된 const 변수들은 routes의 모듈을 사용하는데, routes는 기능별로 api를 나누어 index와 controller로 구분되어있다.

index.js (category)


카테고리 부분의 index 파일이다.
controller를 받아와 각각의 모듈을 post 또는 get 방식으로 exports 하는 것을 나타낸다.

category.controller.js



다음은 컨트롤러 부분이다. 데이터베이스와의 연동, 그리고 CRUD가 가능하도록 구성되어 있다.
이 서버가 TOAST 클라우드 안에서 작동중이며, 클라이언트와 통신을 주고받는다.
sql문을 사용해 데이터베이스에 정보를 삽입, 삭제, 수정, 읽기 할 수 있으며 express를 이용한 http 통신 REST API이다.
15. 설계 아키텍처


우리는 클라이언트-서버 모델을 택하고 있으며 현재 제작중인 앱이 클라이언트, TOAST 클라우드에서 작동중인 node.js 및 mySQL이 서버가 된다. 모든 데이터는 서버에 저장이 되어있으며 서로간의 http 통신을 통해 데이터를 주고받는다.



이 UML 다이어그램에서도 나타나듯 애플리케이션(클라이언트), TOAST 클라우드(서버)의 구조이다.


16. 테스트 케이스

단위 테스트 – 조원이 개개인이 작성한 함수에 대해 mock up용 프로젝트를 임의로 하나 만들어 input 값을 넣어 output이 잘 나오는지 확인하였고, mock up test가 잘 실행되면 다음으로 해당 함수를 프로젝트 안에 넣어 실행해 보고, 결과 값을 Log를 찍어 확인하는 방식으로 단위 테스트를 진행하였다. 테스트 결과 사소한 에러는 조원 개인이 수정하여 완성도를 높이는 방법으로 진행하였다.
 
통합 테스트 – 통합 테스트는 조 구성원들이 개발한 모듈들을 합친 후 상호 연동이 되는지 확인하는 과정으로, 이 프로젝트는 크기가 크지 않기 때문에 코드들의 통합 수준으로 진행되었다. 깃헙에 올린 후 각자의 작업을 push하는 수순으로 진행되었다.

시스템 테스트 – 시스템 테스트는 통합이 완료된 시스템에 대해 실시하였다. 우리는 시스템에 부하를 주어 실시하는 성능 테스트보다는 시스템의 장애에 관한 장애 테스트에 중점을 두어 실시하였다. 

17. 데이터 구조
상단바 및 하단바 – AppTabNavigator
CMP_ 컴포넌트를 의미. 화면 속 구성
ITEM_ 컴포넌트 속에 사용되는 아이템들을 의미
App.js
AppStackNavigator : 화면을 전환시켜주는 네비게이터

CMP_category.js

화면 안의 컴포넌트 구성. 화면 안에 각각의 아이템을 넣어 선택할 수 있도록 설정하였다.

18. 프론트 구성
  
(1) 로그인 화면 – 로그인 및 회원가입을 할 수 있는 화면이다.
(2) 카테고리별 게임선택 화면이다. 아이템을 선택하면 해당 게임의 티어 리스트로 넘어간다.


(3) 해당하는 게임의 티어 리스트가 나타난다. 티어를 선택하면 티어별 모집 방으로 이동한다.
(4) 같이 게임할 팀원을 모집하는 방을 만드는 화면이다. 원하는 인원, 제목, 포지션과 몇분 후에 삭제될 지를 설정한 후 생성한다.


(5) 사이드바 및 프로필 화면이다. 자신의 정보 확인 및 로그아웃을 할 수 있다


(6) 상대방 프로필 확인. 친구추가 및 1:1 채팅 기능이 있다.
(7) 친구 리스트 페이지. 친구 목록을 확인할 수 있다.


(8) 채팅 리스트 화면. 자신이 채팅중인 리스트를 확인할 수 있다.
(9) 해시태그 검색 화면. 해시태그를 이용해 자신이 원하는 채팅방을 검색할 수 있다.

19. 소스코드 관리

모든 소스코드는 Git을 이용하여 협업을 진행하였다.










20. 보안 관리

(1) 유저 인증 관리



 -Node JS Email인증 모듈을 사용

  STEP1. 인증 요청이 오면 난수를 발생하여 사용자에게 난수를 포함한 이메일을 보낸다.

  STEP2. 사용자의 이메일의 난수를 앱에서 입력하여 인증을 요청한다. 

  STEP3. 서버단에서 난수를 비교 후 성공여부를 반환한다.




(2) 유저 비밀번호 암호화 알고리즘 사용



 -암호화 알고리즘의 도입 필요성

  1. 외부 유출 시 암호화 알고리즘으로 암호화된 비밀번호가 유출되므로 안전장치 역할을 한다.

  2. 개발자가 유저의 비밀번호를 알 수 있으면 악용할 수 있다.



21. play store 출시




 - play store 앱 출시 타임라인


  2020. 11. 23 : 앱 등록 [첫 출시]

  2020. 11. 30 : 로그인 세션 오류 수정 [업데이트]

  2020. 12. 02 : 유지보수 진행중






22. 향후 계획 및 목표






  1. GCP의 자연어 처리 API를 이용한 추천기능

  2. 감정 분석 & 콘텐츠 분류 기능을 이용한 추천 기능 업데이트 

  3. 애플리케이션 유지보수

  4. 서버 사이드 이미그레이션 (Toast 서버가 12월 31일 종료 예정)
